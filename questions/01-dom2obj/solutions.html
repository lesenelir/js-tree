<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dom2JSON</title>
</head>
<body>
  <div class="box">
    <span>
      <a></a>
    </span>
    <span>
      <a></a>
      <a></a>
    </span>
  </div>

  <script>
    /*  dom -> obj  */
    /**
     * {
     *   tag: 'DIV',
     *   children: [
     *     {
     *       tag: 'SPAN',
     *       children: [
     *         { tag: 'A', children: [] }
     *       ]
     *     },
     *     {
     *       tag: 'SPAN',
     *       children: [
     *         { tag: 'A', children: [] },
     *         { tag: 'A', children: [] }
     *       ]
     *     }
     *   ]
     * }
     */

    function dom2obj(node) { // The parameter 'node' is a DOM node
      if (!node) return

      let obj = {
        tag: node.tagName,
        children: []
      }

      node.children && [...node.children].forEach(item => {
        obj.children.push(dom2obj(item))
      })

      return obj
    }

    const dom = document.getElementsByClassName('box')[0]
    console.log(dom2obj(dom))
  </script>
</body>
</html>
